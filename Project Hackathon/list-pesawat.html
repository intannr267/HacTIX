<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daftar Penerbangan</title>
  <link rel="stylesheet" href="HacTixStyle.css"/>
</head>
<body>

  <h1>Daftar Penerbangan</h1>
  <div id="infoPemesanan"></div>
  <div id="daftarPesawat"></div>

  <!-- Tombol kembali akan tetap di bawah layar -->
  <button class="back-btn" onclick="window.history.back()">Kembali</button>

  <script>
    // Ambil data pemesanan dari sessionStorage
    const data = JSON.parse(sessionStorage.getItem("pemesanan"));

    if (!data) {
      document.body.innerHTML = "<p>Data pemesanan tidak ditemukan. Silakan kembali ke halaman awal.</p>";
    } else {
      // Tampilkan ringkasan pemesanan
      document.getElementById("infoPemesanan").innerHTML = `
    <div class="info-box">
      <p><strong>Dari:</strong> ${data.dari}</p>
        <p><strong>Ke:</strong> ${data.ke}</p>
        <p><strong>Tanggal:</strong> ${data.tanggal}</p>
        <p><strong>Dewasa:</strong> ${data.jumlahDewasa}, <strong>Anak:</strong> ${data.jumlahAnak}</p>
        <hr/>
      `;

      // Contoh daftar pesawat
      const daftarPesawat = [
        {
          maskapai: "HACTIV AIR",
          kode: "HA123",
          jam: "08:00",
          harga: 1200000
        },
        {
          maskapai: "Air HACTIV",
          kode: "AH456",
          jam: "10:30",
          harga: 950000
        },
        {
          maskapai: "HACTIV JET",
          kode: "HJ789",
          jam: "13:15",
          harga: 850000
        }
      ];

      const container = document.getElementById("daftarPesawat");

      // Tampilkan setiap pesawat
      daftarPesawat.forEach(pesawat => {
        const card = document.createElement("div");
        card.className = "flight-card";
        card.innerHTML = `
          <h3>${pesawat.maskapai}</h3>
          <p><strong>Kode:</strong> ${pesawat.kode}</p>
          <p><strong>Jam Keberangkatan:</strong> ${pesawat.jam}</p>
          <p><strong>Harga per Penumpang:</strong> Rp ${pesawat.harga.toLocaleString("id-ID")}</p>
          <button onclick="pilihPesawat('${pesawat.maskapai}', '${pesawat.kode}', '${pesawat.jam}', ${pesawat.harga})">Pilih</button>
        `;
        container.appendChild(card);
      });
    }

    // Fungsi untuk memilih pesawat
    function pilihPesawat(maskapai, kode, jam, harga) {
      // Menyimpan data pesawat yang dipilih di sessionStorage
      const pesawatDipilih = { maskapai, kode, jam, harga };

      // Simpan pemesanan yang sudah ditambahkan pesawatnya
      const pemesanan = JSON.parse(sessionStorage.getItem("pemesanan"));
      pemesanan.pesawatDipilih = pesawatDipilih;
      sessionStorage.setItem("pemesanan", JSON.stringify(pemesanan));
     
      // Redirect ke form pemesanan
      window.location.href = "form-pemesanan.html";
    }
  </script>

</body>
</html>
